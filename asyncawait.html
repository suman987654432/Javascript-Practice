<html>
  <head>
    <title>Fetch API</title>
  </head>
  <body>
    <h1>Fetch API</h1>
    <button onclick="fetchwithThen()">Fetch using .then()</button>
    <button onclick="fetchWithAsync()">Fetch using async and await</button>
    <button onclick="fetchUsingXHR()">Fetch using XHR</button>
    <pre id="output">Output will present here......</pre>
    <script>
      const output = document.getElementById("output");
      //   Fetching data using .then()
      function fetchwithThen() {
        fetch("https://jsonplaceholder.typicode.com/users/3")
          .then((response) => {
            return response.json();
          })
          .then((data) => {
            output.textContent = JSON.stringify(data, null, 8);
          })
          .catch((err) => {
            output.textContent = "Error : " + err;
          });
      }
      //   fetch data using async and await
      async function fetchWithAsync() {
        try {
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/users/1"
          );
          const data = await response.json();
          output.textContent = JSON.stringify(data, null, 3);
        } catch (error) {
          (output.textContent = "Error : "), error;
        }
      }
      // old way using xhr object
      function fetchUsingXHR() {
        const xhr = new XMLHttpRequest();
        xhr.open("GET", "https://jsonplaceholder.typicode.com/users/3");
        xhr.onload = function () {
          if (xhr.status == 200) {
            output.textContent = xhr.responseText;
          } else {
            output.textContent = "XHR error";
          }
        };
        
        xhr.send();
      }
    </script>
  </body>
</html>




const task = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("task done");
  }, 1000);
});

task.then(result => console.log(result));



Promise.all([
  fetch("https://jsonplaceholder.typicode.com/users/1"),
  fetch("https://jsonplaceholder.typicode.com/users/2"),
  fetch("https://jsonplaceholder.typicode.com/users/3")
])
.then(([p1, p2, p3]) => {
  console.log(p1);
  console.log(p2);
  console.log(p3);
})
.catch(err => console.log(err));
